@model IEnumerable<WebPruebaAfecor.Models.OrdenCompra>

<div class="container mt-4">
    <h2>Órdenes de Compra</h2>

    <form method="get" class="mb-3">
        <div class="row">
            <div class="col-md-4">
                <input type="text" name="searchTerm" class="form-control"
                       placeholder="Buscar por cliente, producto o fecha (dd/MM/yyyy)"
                       value="@ViewData["searchTerm"]" />
            </div>
            <div class="col-md-2">
                <button class="btn btn-outline-primary" type="submit">Buscar</button>
            </div>
            <div class="col-md-2">
                <a asp-action="Crear" class="btn btn-success">Agregar Orden</a>
            </div>
        </div>
    </form>

    <table class="table table-striped mt-3">
        <thead>
            <tr>
                <th>ID</th>
                <th>Cliente</th>
                <th>Producto</th>
                <th>Fecha</th>
                <th>Total</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var orden in Model)
            {
                <tr>
                    <td>@orden.IdOrden</td>
                    <td>@orden.NombreCliente</td>
                    <td>@orden.NombreProducto</td>
                    <td>@orden.FechaOrden.ToString("dd/MM/yyyy")</td>
                    <td>$@orden.TotalOrden</td>
                    <td>
                        <a asp-action="Editar" asp-route-id="@orden.IdOrden" class="btn btn-primary btn-sm">
                            <i class="fas fa-edit"></i> Editar
                        </a>
                        <a asp-action="Eliminar" asp-route-id="@orden.IdOrden" class="btn btn-danger btn-sm">
                            <i class="fas fa-trash-alt"></i> Eliminar
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
